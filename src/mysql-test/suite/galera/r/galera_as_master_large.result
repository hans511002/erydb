#
# MDEV-9044 : Getting binlog corruption on my Galera cluster (10.1.8)
# making it impossible to async slave.
#
START SLAVE;
SELECT @@GLOBAL.BINLOG_CACHE_SIZE;
@@GLOBAL.BINLOG_CACHE_SIZE
8192
CREATE TABLE t1 (c1 INTEGER PRIMARY KEY, c2 VARCHAR(12000)) ENGINE=INNODB;
CREATE TABLE t2 (c1 INTEGER PRIMARY KEY) ENGINE=INNODB;
START TRANSACTION;
INSERT INTO t1 VALUES(1, REPEAT('-', 10000));
COMMIT;
INSERT INTO t2 VALUES(1);
SELECT c1, LENGTH(c2) FROM t1;
c1	LENGTH(c2)
1	10000
SELECT * FROM t2;
c1
1
SELECT c1, LENGTH(c2) FROM t1;
c1	LENGTH(c2)
1	10000
SELECT * FROM t2;
c1
1
# Cleanup
DROP TABLE t1, t2;
STOP SLAVE;
RESET SLAVE ALL;
